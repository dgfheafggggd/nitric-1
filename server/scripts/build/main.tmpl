// Code generated by nitric plugin builder - DO NOT EDIT.
//
// Source: github.com/nitrictech/plugins-poc/host/hacks/build

package main

import (
	"github.com/nitrictech/nitric/server/runtime/storage"
	"github.com/nitrictech/nitric/server/runtime/pubsub"
	"github.com/nitrictech/nitric/server/runtime"
    "github.com/nitrictech/plugins-poc/host/server"
	{{- range .Storage }}
	{{ .Alias }} "{{ .Import }}"
	{{- end }}
	{{- range .PubSub }}
	{{ .Alias }} "{{ .Import }}"
	{{- end }}
)

// storagePluginRegistry maps plugin names to their storage plugin constructors
var storagePluginRegistry = map[string]plugins.Constructor[storage.Storage]{
	{{- range .Storage }}
	"{{ .Name }}": {{ .Alias }}.Plugin,
	{{- end }}
}

// pubsubPluginRegistry maps plugin names to their pubsub plugin constructors
var pubsubPluginRegistry = map[string]plugins.Constructor[pubsub.Pubsub]{
	{{- range .PubSub }}
	"{{ .Name }}": {{ .Alias }}.Plugin,
	{{- end }}
}

func main() {
    // Register all storage plugins
	runtime.RegisterPlugins(storage.Register, storagePluginRegistry)

    // Register all pubsub plugins
	runtime.RegisterPlugins(pubsub.Register, pubsubPluginRegistry)

    // Start the host
    runtime.Start()
}
